// Assisted by WCA@IBM
// Latest GenAI contribution: ibm/granite-20b-code-instruct-v2
<!DOCTYPE html>
<html>
  <head>
    <title>GenAI with Sales Manuals Demo Page</title>
  </head>
  <body>
    <h1>GenAI with Sales Manuals Demo Page</h1>
    <h2>Introduction</h2>
    <p>This is a simple Flask web page, which is built to link to the different stages of the demo David Spurway built to show GenAI using Sales Manual PDF documents, running on Red Hat OpenShift Container Platform on IBM Power.</p> 
    <p>For this, we are using the Techzone environment "OpenShift on POWER10 - Bastion, 1 Master with NFS Storage".</p>

    <h2>List Collections which can be used for Retrieval Augmented Generation at this time</h2>
    <button onclick="myRAG_list_collections_func()">Click to List Collections for RAG</button>
    <p id="RAG_list_collections_id"></p>

    <script>
      function myRAG_list_collections_func() {
        fetch("https://rag-list-collections-llm-on-techzone.apps.p1296.cecc.ihost.com/")
          .then(response => response.json())
          .then(data => {
            console.log(data);
            document
              .getElementById("RAG_list_collections_id")
              .insertAdjacentHTML("beforeend", `<p>${JSON.stringify(data)}</p>`);
          })
          .catch(error => {
            console.error("Error fetching data:", error);
          });
      }
    </script>

    <h2>Drop the Collections from the Vector DB, so we can load fresh data to be used for Retrieval Augmented Generation</h2>
    <div>
    <label for="collection">Collection Name:</label>
    <input type="text" id="collection" name="collection"><br><br>
    </div>
    <button onclick="myRAG_drop_collections_func()">Enter a collection above then click to drop that collection</button>
    <p id="RAG_drop_collections_id"></p>

    <script>
      function myRAG_drop_collections_func() {
        var collectionName = document.getElementById("collection").value;
        fetch("https://rag-drop-collection-llm-on-techzone.apps.p1296.cecc.ihost.com/?Collection=" + collectionName)
          .then(response => response.json())
          .then(data => {
            console.log(data);
            document
              .getElementById("RAG_drop_collections_id")
              .insertAdjacentHTML("beforeend", `<p>${JSON.stringify(data)}</p>`);
          })
          .catch(error => {
            console.error("Error fetching data:", error);
          });
      }
    </script>

    <h2>Load pre-saved Sales Manual PDF documents into the Vector DB so the data to be used for Retrieval Augmented Generation</h2>
    <div>
      <button id="IBM_Power_S1012" onclick="myRAG_loader_func(IBM_Power_S1012)">Load IBM Power S1012 Sales Manual</button>
      <button id="IBM_Power_S1014" onclick="myRAG_loader_func(IBM_Power_S1014)">Load IBM IBM Power S1014 Sales Manual</button>
      <button id="IBM_Power_S1022" onclick="myRAG_loader_func(IBM_Power_S1022)">Load IBM IBM Power S1022 Sales Manual</button>
      <button id="IBM_Power_S1022s" onclick="myRAG_loader_func(IBM_Power_S1022s)">Load IBM IBM Power S1022s Sales Manual</button>
      <button id="IBM_Power_S1024" onclick="myRAG_loader_func(IBM_Power_S1024)">Load IBM IBM Power S1024 Sales Manual</button>
    </div>
    
    <p id="RAG_loader_id"></p>

    <script>
      function myRAG_loader_func(Server_Name) {
        fetch("https://rag-loader-llm-on-techzone.apps.p1296.cecc.ihost.com/?Server_Name=" + Server_Name)
          .then(response => response.json())
          .then(data => {
            console.log(data);
            document
              .getElementById("RAG_loader_id")
              .insertAdjacentHTML("beforeend", `<p>${JSON.stringify(data)}</p>`);
            document.getElementById(Server_Name).innerHTML = "&#10003;";
          })
          .catch(error => {
            console.error("Error fetching data:", error);
          });
      }
    </script>
    
  </body>
</html>
